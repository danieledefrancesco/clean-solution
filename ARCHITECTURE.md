# Architecture

## Table of contents

1. [Overview](#overview)
2. [Features implementation](#features-implementation)
   1. [Get a product by id](#get-a-product-by-id)
   2. [Create a product](#create-a-product)

## Overview
The following diagram illustrates the architecture overview of the context where the product service operates.

![Architecture overview](./markdown-assets/architecture-overview.svg)***Figure 1**: Architecture overview*

- The Product Service is implemented in an AspNet 6 Web API application
- The Price Card Service is not implemented within this repository and is virtualized through Wiremock.
- The Product Service Database is a SQL Server database.
- The OnProductCreated queue is provided by Azure Storage Queue.

In the local environment, all of this objects are run within docker containers managed via docker-compose. For more details about how to run the local environment refer to the [README](./README.md) file

## Features implementation

For more details related to the features implemented by this product refer to the living docs present in the *behavioral-test-results* artifact generated by the *build_and_test* github action.
The artifacts also provide a *swagger.yaml* file stored in the *swagger* artifact that can be use as a reference to understand how to properly invoke the requests.

### Get a product by id

The following sequence diagram illustrates the get product by id operation.

![Get product by id](./markdown-assets/get-product-by-id.svg)***Figure 2**: Get a product by id sequence diagram*


In order to execute a *get product by id request* use the following curl command:
```
curl --location --request GET 'http://localhost:8000/products/{id}'
```

### Create a product



In order to execute a *create product request* use one of the following curl commands:
```
curl --location --request POST 'http://localhost:8000/products' \
--header 'Content-Type: application/json' \
--data-raw '{
    "id":"{productId}",
    "name":"{productName}",
    "price":{productPrice}
}'
```
or
```
curl --location --request PUT 'http://localhost:8000/products' \
--header 'Content-Type: application/json' \
--data-raw '{
    "id":"{productId}",
    "name":"{productName}",
    "price":{productPrice}
}'
```
